# GUI 要件メモ (Tauri + React + Mantine 前提)

確定した入出力仕様（対応拡張子/出力物/ディレクトリ構成）は `docs/spec.md` を参照してください。ここでは UI 側の要件に集中します。  
設定画面に反映する候補（CLI のオプション一覧）は `docs/cli_commands.md` を参照してください。

## 1. 画面一覧
- ダッシュボード（ホーム）
  - 最近処理したファイル一覧（日時・入力種別・結果ステータス）
  - 新規処理ボタン
- OCR 実行画面
  - 入力エリア: ファイル/フォルダドロップ、ファイル選択、入力一覧テーブル
  - オプション: 言語(ja)、ページ範囲（PDFごと・未指定=全ページ）、画質補正(デフォルトON)、出力形式(md/docx)
  - 実行: スタート/キャンセル、進捗バー、現在処理中ページ
  - ログ表示: 簡易ログ、詳細ログトグル
- 結果閲覧画面
  - プレビュー: Markdown/Docx 簡易プレビュー（テキストのみでOK）
  - ダウンロード: md / docx / pdf(将来) ボタン
  - メタ情報: 処理時間、誤字率推定(将来)
- 設定画面
  - 出力先ディレクトリ（デフォルト: アプリ同梱フォルダ内 `output/`）
  - ログレベル（info/debug）
  - オフラインモード切替（モデル再DL禁止）
  - GPUオプション（将来フラグのみ）
  - 初回モデルDLの許可

## 2. 状態とエラー
- 状態: idle / queued / running / completed / failed
- 進捗: 総ページ数に対する完了ページ数、1ページ平均時間
- エラー表示: ファイル読み込み失敗、poppler 実行失敗、出力書き込み不可
- リトライ: 失敗ファイルだけ再処理

## 3. 入力仕様
- 最大ページ: 100（要件より）
- ドロップ/選択複数可。重複ファイルは警告。

## 4. 出力仕様
- 形式: Markdown / docx /（将来）xlsx
- 保存先: デフォルト `./output/<timestamp>/`。ユーザー指定可（設定で記憶）。
- ファイル命名: `input_basename.md` など、被りは連番。

## 5. 配布・同梱
- 配布形態: ポータブル zip（app.exe + resources/）
- 同梱: poppler バイナリ（Windows版）。その他モデルは初回DL可にする。
- 容量目標: 100MB 以内。
- 設定: `config.json` をアプリと同階層に置く。
- ログ: `logs/app.log`。PII を避けた簡易テキスト。サイズ上限ローテーション (例 5MB x 3)。

## 6. ナビゲーション構成
- ヘッダー: ロゴ、ナビ（ホーム / 実行 / 設定）
- メイン: 上記各画面
- フッター: バージョン、コピーライト

## 7. アクセシビリティ・UX
- キーボード操作: Tab移動、Enterで実行ボタン、Escでモーダル閉じる
- フィードバック: 実行中はボタンを loading 状態、完了/失敗をトースト表示
- モバイル幅: 360px でもフォーム/リストが崩れないレイアウト

## 8. 今後のタスク（UI視点）
- [ ] 画面ごとのワイヤー（ラフ）作成
- [ ] コンポーネント粒度設計（atoms/molecules/organisms）
- [ ] 状態管理方針（React Query or zustand など）決定
- [ ] 初回モデルDLフローのUI（確認ダイアログ + 進捗表示）
- [ ] エラーログ確認用の簡易ビュー（テキスト折り畳み）
