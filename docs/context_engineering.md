# Context Engineering

## 1. 目的・動機
- **最終目的**: 教育現場で Word / Excel 資料作成を効率化できる GUI ツールを配布する。
- **短期（フェーズ1）ゴール**: 紙資料の画像/PDFをレイアウト保持したまま Markdown 化し、Word/xlsx への変換基盤を整える。
- **個人的動機**: 問題集の抜粋や図表レイアウトの手入力作業を省きたい。

## 2. 想定ユーザー / シナリオ
- 学校現場の教員・事務担当。
- 紙資料を写真やスキャンPDFとして取り込み、レイアウトを維持した状態で Office で編集可能にする。
- 処理はローカルPCで完結（クラウド送信なし）。

## 3. 制約・前提
- ハードウェア: GPU なし、メモリ 8〜16GB クラスの事務PC。
- 品質: 細かなレイアウト差異は手動調整で許容。
- 実装済み機能/確定仕様は `docs/spec.md` に集約する。

## 4. 成功指標
- 表レイアウトの完全再現。
- OCR 誤字率 2% 未満。
- 図・イラストを `--figure` で画像抽出。
- 1 ページの PDF 処理を 30 秒以内。

## 5. 既存資産 / 依存
- OCR: YomiToku。
- 変換: Pandoc（docx/xlsx 変換検討）。
- テキストPDF対応: markitdown。
- GUI: Tauri + React を採用。

## 6. 未確定事項 / TODO
- 受け渡し時の共有フォーマットやトーンの指針は未定。
- 注意事項（触れてほしくない領域、優先確認ポイント）は今後の開発過程で整理予定。
- macOS で開発しつつ Windows 用バイナリを同梱する方針（詳細は `docs/env_and_limits.md`）。
- Markdown → Word 変換時の数式（LaTeX→Word数式）対応はフェーズ 2 以降で検討。現状はテキスト化のみ。
- **GUI 機能強化**: 設定画面、履歴機能、ステータスバー改善、結果プレビュー拡充、画像入力対応など。
- **次セッション（Excel 変換）予定**: Markdown から Excel へ変換する PoC を開始する。要件テンプレを事前に埋め、対象データ（表主体の PDF）・成功指標（セル結合・数式反映の有無）・制約（python-docx 同等の python‐excel ライブラリなど）を明記したうえで着手する。

## 7. 開発プロセス指針（要件定義→PoC→実装）
- **要件定義**: 機能追加前に「目的」「成功指標」「制約」「想定データ」を要件シートで明文化し、リスクと前提を洗い出す。
- **PoC / 技術検証**: 要件で定義した成功指標が満たせるか小規模データで検証し、実装可否・コスト・精度の見通しを共有する。Go/No-Go をここで判定。
- **実装 / GUI**: PoC で目処が立った機能のみ本実装に進める。GUI 等の上位層は、プレーンテキスト出力を土台に段階的に拡張する。
- **ローカル完結の遵守**: データはクラウドに送らず、必要に応じてローカル LLM（将来オプション）と連携する設計を検討する。
- **フィードバックループ**: 実装後の成果は要件シートに追記してナレッジ化し、次フェーズの要件定義で再利用する。
